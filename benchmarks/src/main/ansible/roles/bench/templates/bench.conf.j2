cluster {
  local = false

  local-cluster {
    workers = 1
    fronts = 1
  }

  real-cluster {
    zk = "{{ hostvars[groups['zookeeper'][0]].inner_dns }}:{{ client_port }}"
    nodes = [
    {% for worker in groups['workers'] %}
      {id = {{ hostvars[worker].ds_id }}, host = "{{ hostvars[worker].inner_dn }}", port = {{ hostvars[worker].ds_port }}}
      {{ "," if not loop.last }}
    {% endfor %}
    ],
    fronts = [{{ hostvars[groups['bench'][0]].ds_id }}]
  }
}

cluster-runner {
  runner = com.spbsu.datastream.benchmarks.bl.wordcount.WordCountRunner
}
